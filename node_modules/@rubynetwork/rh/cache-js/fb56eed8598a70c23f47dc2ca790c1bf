/*hammerhead|script|start*/"use strict";if (typeof window !== 'undefined' && window){window['hammerhead|process-dom-method'] && window['hammerhead|process-dom-method']();if (window.__get$ && typeof __get$ === 'undefined')var __get$Loc = window.__get$Loc,__set$Loc = window.__set$Loc,__set$ = window.__set$,__get$ = window.__get$,__call$ = window.__call$,__get$Eval = window.__get$Eval,__proc$Script = window.__proc$Script,__proc$Html = window.__proc$Html,__get$PostMessage = window.__get$PostMessage,__get$ProxyUrl = window.__get$ProxyUrl,__rest$Array = window.__rest$Array,__rest$Object = window.__rest$Object,__arrayFrom$ = window.__arrayFrom$;} else {if (typeof __get$ === 'undefined')var __get$Loc = function(l){return l},__set$Loc = function(l,v){return l = v},__set$ = function(o,p,v){return o[p] = v},__get$ = function(o,p){return o[p]},__call$ = function(o,p,a){return o[p].apply(o,a)},__get$Eval = function(e){return e},__proc$Script = function(s){return s},__proc$Html = function(h){return h},__get$PostMessage = function(w,p){return arguments.length===1?w.postMessage:p},__get$ProxyUrl = function(u,d){return u},__rest$Array = function(a,i){return Array.prototype.slice.call(a, i)},__rest$Object = function(o,p){var k=Object.keys(o),n={};for(var i=0;i<k.length;++i)if(p.indexOf(k[i])<0)n[k[i]]=o[k[i]];return n},__arrayFrom$ = function(r){if(!r)return r;return!Array.isArray(r)&&"function"==typeof r[Symbol.iterator]?Array.from(r):r};if (typeof importScripts !== "undefined" && /\[native code]/g.test(importScripts.toString())) {var __getWorkerSettings$ = function () {return null};importScripts((location.origin || (location.protocol + "//" + location.host)) + "/worker-hammerhead.js");}}/*hammerhead|script|processing-header-end*/
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9944],{9944:function(n,e,t){t.r(e),t.d(e,{default:function(){return N},startStreaming:function(){return O}});var r,o,i=t(85893),a=t(3132),s=t(78520),u=t(15172),c=t(81043),l=t(4374),d={src:"/play/_next/static/media/streaming.fe49d096.svg",height:19,width:22,blurWidth:0,blurHeight:0},p=t(12102),f=t(47444),h=t(32398),b=t(9973),m=t(29872),g=t(33678),v=t(88157),y=t(53391),x=t(45001),w=t(57294),P=t(42774),k=t(67294),T=t(57833),S=function(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n},Z=T.ZP.button.withConfig({componentId:"sc-4d3c0f11-0"})(r||(r=S(["\n  display: flex;\n  align-items: center;\n  list-style: none;\n  cursor: pointer;\n  position: relative;\n  border-radius: ",";\n  outline: none;\n  color: inherit;\n  background: ",";\n  border: 0;\n  padding: 8px;\n  justify-content: center;\n  flex-direction: column;\n  gap: 4px;\n  border-radius: 5px;\n  padding: 2px;\n\n  &:hover {\n    background: ",";\n  }\n  ","\n  i {\n    font-size: 24px;\n  }\n\n  span {\n    width: 100%;\n    border-radius: 3px;\n    text-align: center;\n    padding: 0px 6px;\n  }\n  ","\n"],["\n  display: flex;\n  align-items: center;\n  list-style: none;\n  cursor: pointer;\n  position: relative;\n  border-radius: ",";\n  outline: none;\n  color: inherit;\n  background: ",";\n  border: 0;\n  padding: 8px;\n  justify-content: center;\n  flex-direction: column;\n  gap: 4px;\n  border-radius: 5px;\n  padding: 2px;\n\n  &:hover {\n    background: ",";\n  }\n  ","\n  i {\n    font-size: 24px;\n  }\n\n  span {\n    width: 100%;\n    border-radius: 3px;\n    text-align: center;\n    padding: 0px 6px;\n  }\n  ","\n"])),function(n){return n.theme.border.radius2},function(n){var e=n.theme;return n.active?e.colors.black70:"none"},function(n){var e,t=n.theme;return n.active?"":null===(e=t.colors)||void 0===e?void 0:e.white10},function(n){var e=n.active,t=n.theme;return e?"&:after{\n      content: '';\n      position: absolute;\n      top: 0;\n      right: 0;\n      left: 0;\n      background: ".concat(t.colors.black70,";\n      z-index: -1;\n      border-radius: 8px;\n      bottom: 0;\n    }"):""},function(n){return n.isMobile&&"\n    padding: 0px;\n  "}),A=T.ZP.div.withConfig({componentId:"sc-4d3c0f11-1"})(o||(o=S(["\n   display: inline-flex;\n   height: 58px;\n   justify-content: center;\n   align-items: center;\n   flex-shrink: 0;\n   border-radius: 6px;\n   border: 1px solid ",";\n   background: ",";\n   position: fixed;\n   transform: translate(-42%, -115%);\n   backdrop-filter: blur(12px);\n   padding: 8px 12px;\n   gap: 10px;\n   width: 220px;\n   z-index: 3;\n   p {\n     padding-right: 12px;\n     border-right: 1px solid ",";\n   }\n   i {\n     font-size: 16px;\n     cursor: pointer;\n   }\n   &:before {\n     content:'';\n     position: absolute;\n     left: 0;\n     right: 0;\n     margin: 0 auto;\n     width: 0;\n     height: 0;\n     border-top: 5px solid ",";\n     border-left: 8px solid transparent;\n     border-right: 8px solid transparent;\n     top: 100%;\n   }\n "],["\n   display: inline-flex;\n   height: 58px;\n   justify-content: center;\n   align-items: center;\n   flex-shrink: 0;\n   border-radius: 6px;\n   border: 1px solid ",";\n   background: ",";\n   position: fixed;\n   transform: translate(-42%, -115%);\n   backdrop-filter: blur(12px);\n   padding: 8px 12px;\n   gap: 10px;\n   width: 220px;\n   z-index: 3;\n   p {\n     padding-right: 12px;\n     border-right: 1px solid ",";\n   }\n   i {\n     font-size: 16px;\n     cursor: pointer;\n   }\n   &:before {\n     content:'';\n     position: absolute;\n     left: 0;\n     right: 0;\n     margin: 0 auto;\n     width: 0;\n     height: 0;\n     border-top: 5px solid ",";\n     border-left: 8px solid transparent;\n     border-right: 8px solid transparent;\n     top: 100%;\n   }\n "])),function(n){return n.theme.colors.white20},function(n){return n.theme.colors.black70},function(n){return n.theme.colors.white},function(n){return n.theme.colors.white20}),E=t(83235),I=function(){return(I=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e= __get$(arguments,t) )Object.prototype.hasOwnProperty.call(e,o)&&( __set$(n,o,__get$(e,o)) );return n}).apply(this,arguments)},_=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&( __set$(i,Symbol.iterator,function(){return this;}) ),i;function s(s){return function(u){return function(s){if(t)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&& __get$(o,o.length-1) )&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(n){s=[6,n],r=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},O=function(n,e){var t,r,o,i;return void 0===n&&(n=!1),void 0===e&&(e=""),t=void 0,r=void 0,o=void 0,i=function(){var t;return _(this,function(r){switch(r.label){case 0:return t={playSessionId:a.ZP.playSessionId,appId:a.ZP.appInfo.appId,mode:"Public",position:e?"retry":n?"footer":"firstPrompt",aspectRatio:(0,P.Dc)()},e?t=I(I({},t),{lstrmId:e}):s.Z.dispatch({type:f.Z.UPDATE_ONBOARDING_POPUP,payload:{showOnboardingPopup:!1,showStreamUrlPopup:!0}}),[4,(0,E.Z)()];case 1:return r.sent(),s.Z.getState().streaming.firestoreUidToken||(s.Z.dispatch({type:f.Z.UPDATE_ONBOARDING_POPUP,payload:{showStreamUrlPopup:!1,streamingMode:!1,showOnboardingPopup:!1}}),(0,u.L9)("StartStreamingClicked",{position:n?"footer":"firstPrompt",status:"FirestoreTokenFailure"})),h.t.startLiveStream({},t).then(function(e){e.status===b.YR.Success?(s.Z.dispatch({type:f.Z.UPDATE_STREAMING_DATA,payload:{streamingMode:!0,streamUrl:"https://".concat( __get$(window,"location") .host,"/stream?w=").concat(e.documentId),documentId:e.documentId,collectionId:e.collectionId}}),(0,u.L9)("StartStreamingClicked",{position:n?"footer":"firstPrompt",streamId:e.documentId,status:e.status}),setTimeout(function(){(0,y.connectToFirestore)(e.collectionId||"LiveStreams",e.documentId||"")},1e3)):e.status!==b.ch.LiveStreamAlreadyStarting&&(s.Z.dispatch({type:f.Z.UPDATE_ONBOARDING_POPUP,payload:{showStreamUrlPopup:!1,streamingMode:!1,showOnboardingPopup:!1}}),(0,u.L9)("StartStreamingClicked",{position:n?"footer":"firstPrompt",status:e.status}),(0,v.ZP)(e.status)),s.Z.dispatch({type:f.Z.UPDATE_STREAMER_STATE,payload:{startStreamInitiated:!1}})}).catch(function(){s.Z.dispatch({type:f.Z.UPDATE_STREAMER_STATE,payload:{startStreamInitiated:!1}})}),[2]}})},new(o||(o=Promise))(function(n,e){function a(n){try{u(i.next(n))}catch(n){e(n)}}function s(n){try{u(i.throw(n))}catch(n){e(n)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof o?t:new o(function(n){n(t)})).then(a,s)}u((i=i.apply(t,r||[])).next())})},N=function(){var n,e,t,r,o=(0,l.$)().t,s=(0,c.v9)(function(n){return n.streaming.streamingMode}),u=(0,c.v9)(function(n){return n.streaming.showToast}),h=(0,c.v9)(function(n){return n.streaming.streamInfo}),b=(0,c.v9)(function(n){return n.streaming.showMobileToolbar}),v=(0,c.v9)(function(n){return n.streaming.showMobileChatWindow}),y=(0,c.v9)(function(n){return n.streaming.startStreamInitiated}),P=(0,k.useState)(!0),T=P[0],S=P[1],E=(0,c.I0)(),I=(0,k.useCallback)(function(){if(v){E({type:f.Z.UPDATE_MOBILE_COMPONENTS,payload:{showMobileChatWindow:!1}});return}E({type:f.Z.UPDATE_MOBILE_COMPONENTS,payload:b?{mobileToolbarClosing:!0}:{showMobileToolbar:!0}})},[E,b,v]),_=(0,k.useCallback)(function(){s?I():T&&(O(!0),S(!1),E({type:f.Z.UPDATE_STREAMER_STATE,payload:{startStreamInitiated:!0}}))},[s,I,O,S,E]);return(0,k.useEffect)(function(){S(!y)},[y]),!s||(0,x.tq)()?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Z,{className:"streaming",style:{margin:(null===(e=null===(n=null===a.ZP||void 0===a.ZP?void 0:a.ZP.appInfo)||void 0===n?void 0:n.playFeFeatures)||void 0===e?void 0:e.enableNativePointer)?"0":void 0,border:(null===(r=null===(t=null===a.ZP||void 0===a.ZP?void 0:a.ZP.appInfo)||void 0===t?void 0:t.playFeFeatures)||void 0===r?void 0:r.enableNativePointer)?"none":void 0,background:h.isPaused?w.qm.colors.caution:b?w.qm.colors.warning:s?w.qm.colors.white20:w.qm.colors.transparent,color:h.isPaused?w.qm.colors.caution:b?w.qm.colors.warning:w.qm.colors.white},id:"ng-streaming",onClick:_,disabled:!T,children:[(0,i.jsx)("img",{src:(0,p.jW)(d),alt:"",width:24,height:24}),s&&(0,i.jsx)("span",{style:{background:h.isPaused?w.qm.colors.black80:b?w.qm.colors.white:w.qm.colors.error,color:h.isPaused?w.qm.colors.caution:b?w.qm.colors.warning:w.qm.colors.white},children:o(h.isPaused?"pause":"live")})]}),u&&(0,x.nI)()&&(0,i.jsxs)(A,{children:[(0,i.jsx)(m.gd,{children:o("streamHereToast")}),(0,i.jsx)(g.Z,{name:"cross-thin",size:10,onClick:function(){E({type:f.Z.SHOW_STREAM_END_TOAST,payload:{showToast:!1}})}})]})]}):null}},83235:function(n,e,t){t.d(e,{Z:function(){return y}});var r=t(78520),o=t(47444),i=t(63439),a=t(9973),s=t(45001),u=t(27042),c=t(25816);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,c.KN)("firebase","10.12.2","app");var l=t(52547),d=t(90109),p=t(3132),f=t(88157),h=t(89355),b=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&( __set$(i,Symbol.iterator,function(){return this;}) ),i;function s(s){return function(u){return function(s){if(t)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&& __get$(o,o.length-1) )&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(n){s=[6,n],r=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},m=function(n){var e,t,i,a;return e=void 0,t=void 0,i=void 0,a=function(){var e,t,i,a,s,u,m,g,v;return b(this,function(b){switch(b.label){case 0:if(b.trys.push([0,7,,8]),!(e=p.ZP.firebaseConfig||""))return(0,f.ZP)("Firebase initialization failed due to invalid config"),[2];return t=(0,c.ZF)(JSON.parse(e)),i=(0,l.v0)(),[4,(0,l.Fb)(i,l.aT)];case 1:b.sent(),b.label=2;case 2:return b.trys.push([2,5,,6]),[4,(0,l._p)(i,n)];case 3:return[4,null===(v=b.sent().user)||void 0===v?void 0:v.getIdToken()];case 4:return a=b.sent(),s=(0,d.ad)(t),u=(0,h.N8)(t),r.Z.dispatch({type:o.Z.OPEN_URL_POPUP,payload:{firestoreDb:s,firebaseDb:u,firestoreUidToken:a}}),[3,6];case 5:return m=b.sent(),(0,f.ZP)(m),[3,6];case 6:return[3,8];case 7:return g=b.sent(),(0,f.ZP)(g),[3,8];case 8:return[2]}})},new(i||(i=Promise))(function(n,r){function o(n){try{u(a.next(n))}catch(n){r(n)}}function s(n){try{u(a.throw(n))}catch(n){r(n)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(n){n(t)})).then(o,s)}u((a=a.apply(e,t||[])).next())})},g=function(n,e){var t,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&( __set$(i,Symbol.iterator,function(){return this;}) ),i;function s(s){return function(u){return function(s){if(t)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&& __get$(o,o.length-1) )&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(n,a)}catch(n){s=[6,n],r=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},v=function(n){var e=JSON.parse(atob( __call$(__call$(n.split(".")[1],"replace",["-","+"]),"replace",["_","/"]) ));return{uid:e.uid,userHandle:e.claims.userHandle,userNickname:e.claims.userNickname,userAvatar:e.claims.userAvatar,expiry:e.exp}},y=function(){var n,e,t,c;return n=void 0,e=void 0,t=void 0,c=function(){var n,e,t,c;return g(this,function(l){switch(l.label){case 0:if(l.trys.push([0,6,,7]),n=sessionStorage.getItem(u.Kxy),r.Z.getState().streaming.firebaseAuthToken)return[2];if(!n||!(new Date(1e3*(e=v(n||"")).expiry)>new Date))return[3,2];return r.Z.dispatch({type:o.Z.SET_FIREBASE_AUTH_TOKEN,payload:{firebaseAuthToken:n,userHandle:e.userHandle||"",userNickname:e.userNickname||"",firebaseUid:e.uid,userAvatar:e.userAvatar||""}}),[4,m(n||"")];case 1:return l.sent(),[2];case 2:return[4,i.ZP.getFirebaseAuthToken({uaSessionId:(0,s.io)(u.K3T)},{})];case 3:if((t=l.sent()).status!==a.YR.Success)return[3,5];return sessionStorage.setItem(u.Kxy,t.customAuthToken||""),c=v(t.customAuthToken||""),r.Z.dispatch({type:o.Z.SET_FIREBASE_AUTH_TOKEN,payload:{firebaseAuthToken:t.customAuthToken,userHandle:c.userHandle||"",userNickname:c.userNickname||"",firebaseUid:c.uid,userAvatar:c.userAvatar||""}}),[4,m(t.customAuthToken||"")];case 4:l.sent(),l.label=5;case 5:return[3,7];case 6:return l.sent(),[3,7];case 7:return[2]}})},new(t||(t=Promise))(function(r,o){function i(n){try{s(c.next(n))}catch(n){o(n)}}function a(n){try{s(c.throw(n))}catch(n){o(n)}}function s(n){var e;n.done?r(n.value):((e=n.value)instanceof t?e:new t(function(n){n(e)})).then(i,a)}s((c=c.apply(n,e||[])).next())})}}}]);

/*hammerhead|script|end*/